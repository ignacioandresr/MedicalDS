<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Documentación API REST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        <div class="container my-5">
            <h1 class="display-5 fw-bold text-primary mb-4">Documentación de API REST</h1>
            <p class="lead mb-4 text-secondary">Endpoints principales: <strong>Pacientes</strong>, <strong>Diagnósticos Generales</strong>, <strong>Registros Clínicos</strong>.<br>
                <span class="badge bg-dark">Base: <code>/api</code></span>
            </p>

            <!-- Pacientes -->
            <div class="api-card p-4 mb-4 rounded">
                <h2 class="h4 mb-3"><i class="bi bi-people"></i> Pacientes</h2>
                <div class="accordion" id="patientsAccordion">
                    <!-- Index -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingPatients1">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePatients1" aria-expanded="false" aria-controls="collapsePatients1">
                                <span class="endpoint-method GET">GET</span>
                                <code>/api/patients</code>
                                <span class="text-secondary ms-2">Listar pacientes (auth + admin)</span>
                            </button>
                        </h2>
                        <div id="collapsePatients1" class="accordion-collapse collapse" aria-labelledby="headingPatients1" data-bs-parent="#patientsAccordion">
                            <!DOCTYPE html>
                            <html lang="es">
                            <head>
                                <meta charset="UTF-8">
                                <title>Documentación API REST</title>
                                <meta name="viewport" content="width=device-width, initial-scale=1">
                                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
                                <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
                                <style>
                                    body { background:#f6f7fb; }
                                    .api-card { border-left:4px solid #0d6efd; background:#fff; box-shadow:0 3px 16px rgba(40,42,68,.07); }
                                    .endpoint-method { font-size:.75rem; font-weight:600; padding:2px 10px; border-radius:4px; margin-right:8px; }
                                    .GET { background:#e8f4ff; color:#266dd3; }
                                    .POST { background:#f1fff0; color:#45b26b; }
                                    .PUT { background:#fff6e0; color:#f6ae2d; }
                                    .DELETE { background:#ffeaea; color:#f44336; }
                                    pre { background:#f4f4f4; padding:.75rem; border-radius:6px; }
                                    code { background:#f4f4f4; padding:2px 6px; border-radius:4px; }
                                </style>
                            </head>
                            <body>
                            <div class="container my-5">
                                <h1 class="display-5 fw-bold text-primary mb-4">Documentación de API REST</h1>
                                <p class="lead mb-4 text-secondary">Endpoints: <strong>Pacientes</strong>, <strong>Diagnósticos Generales</strong>, <strong>Registros Clínicos</strong>. Base <code>/api</code>.</p>

                                <!-- Pacientes -->
                                <div class="api-card p-4 mb-4 rounded">
                                    <h2 class="h4 mb-3"><i class="bi bi-people"></i> Pacientes</h2>
                                    <div class="accordion" id="patientsAccordion">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingPatientsIndex">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#patientsIndex" type="button" aria-expanded="false" aria-controls="patientsIndex">
                                                    <span class="endpoint-method GET">GET</span><code>/api/patients</code><span class="text-secondary ms-2">Listar (auth+admin)</span>
                                                </button>
                                            </h2>
                                            <div id="patientsIndex" class="accordion-collapse collapse" aria-labelledby="headingPatientsIndex" data-bs-parent="#patientsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET https://127.0.0.1/api/patients \
                            -H "Authorization: Bearer 14|xaJYTceGq2AFDoVCNFdjeMr477JWDHsgGuD5ij29"</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>401 Unauthorized</code></li><li><code>403 Forbidden</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingPatientsStore">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#patientsStore" type="button" aria-expanded="false" aria-controls="patientsStore">
                                                    <span class="endpoint-method POST">POST</span><code>/api/patients</code><span class="text-secondary ms-2">Crear</span>
                                                </button>
                                            </h2>
                                            <div id="patientsStore" class="accordion-collapse collapse" aria-labelledby="headingPatientsStore" data-bs-parent="#patientsAccordion">
                                                <div class="accordion-body">
                                                    Campos: rut, name, birth_date (YYYY-MM-DD), gender, adress
                            <pre><code>curl -X POST http://127.0.0.1:8000/api/patients \
                            -H "Authorization: Bearer 14|xaJYTceGq2AFDoVCNFdjeMr477JWDHsgGuD5ij29" \
                            -H "Content-Type: application/json" \
                            -d '{"rut":"11.222.333-4","name":"Ana Pérez","birth_date":"1990-05-12","gender":"F","adress":"Av. Central 123"}'</code></pre>
                                                    <ul class="mb-0"><li><code>201 Created</code></li><li><code>400 Bad Request</code></li><li><code>401/403</code></li><li><code>409 Conflict</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingPatientsShow">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#patientsShow" type="button" aria-expanded="false" aria-controls="patientsShow">
                                                    <span class="endpoint-method GET">GET</span><code>/api/patients/{id}</code><span class="text-secondary ms-2">Mostrar</span>
                                                </button>
                                            </h2>
                                            <div id="patientsShow" class="accordion-collapse collapse" aria-labelledby="headingPatientsShow" data-bs-parent="#patientsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET http://127.0.0.1:8000/api/patients/5 \
                            -H "Authorization: Bearer 14|xaJYTceGq2AFDoVCNFdjeMr477JWDHsgGuD5ij29"</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>404 Not Found</code></li><li><code>401/403</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingPatientsUpdate">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#patientsUpdate" type="button" aria-expanded="false" aria-controls="patientsUpdate">
                                                    <span class="endpoint-method PUT">PUT</span><code>/api/patients/{id}</code><span class="text-secondary ms-2">Actualizar</span>
                                                </button>
                                            </h2>
                                            <div id="patientsUpdate" class="accordion-collapse collapse" aria-labelledby="headingPatientsUpdate" data-bs-parent="#patientsAccordion">
                                                <div class="accordion-body">
                                                    Campos: rut, name, birth_date (YYYY-MM-DD), gender, adress
                            <pre><code>curl -X PUT http://127.0.0.1:8000/api/patients/5 \
                            -H "Authorization: Bearer 14|xaJYTceGq2AFDoVCNFdjeMr477JWDHsgGuD5ij29" \
                            -H "Content-Type: application/json" \
                            -d '{"rut":"11.222.333-4","name":"Ana Pérez García","birth_date":"1990-05-12","gender":"F","adress":"Av. Central 456"}'</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>400 Bad Request</code></li><li><code>401/403</code></li><li><code>404 Not Found</code></li><li><code>409 Conflict</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingPatientsDestroy">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#patientsDestroy" type="button" aria-expanded="false" aria-controls="patientsDestroy">
                                                    <span class="endpoint-method DELETE">DELETE</span><code>/api/patients/{id}</code><span class="text-secondary ms-2">Eliminar</span>
                                                </button>
                                            </h2>
                                            <div id="patientsDestroy" class="accordion-collapse collapse" aria-labelledby="headingPatientsDestroy" data-bs-parent="#patientsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X DELETE http://127.0.0.1:8000/api/patients/5 \
                            -H "Authorization: Bearer 14|xaJYTceGq2AFDoVCNFdjeMr477JWDHsgGuD5ij29"</code></pre>
                                                    <ul class="mb-0"><li><code>204 No Content</code></li><li><code>404 Not Found</code></li><li><code>401/403</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Diagnósticos Generales -->
                                <div class="api-card p-4 mb-4 rounded">
                                    <h2 class="h4 mb-3"><i class="bi bi-clipboard-pulse"></i> Diagnósticos Generales</h2>
                                    <div class="accordion" id="gdAccordion">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingGDIndex">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#gdIndex" type="button" aria-expanded="false" aria-controls="gdIndex">
                                                    <span class="endpoint-method GET">GET</span><code>/api/general-diagnostics</code><span class="text-secondary ms-2">Listar</span>
                                                </button>
                                            </h2>
                                            <div id="gdIndex" class="accordion-collapse collapse" aria-labelledby="headingGDIndex" data-bs-parent="#gdAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET http://127.0.0.1:8000/api/general-diagnostics</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingGDStore">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#gdStore" type="button" aria-expanded="false" aria-controls="gdStore">
                                                    <span class="endpoint-method POST">POST</span><code>/api/general-diagnostics</code><span class="text-secondary ms-2">Crear</span>
                                                </button>
                                            </h2>
                                            <div id="gdStore" class="accordion-collapse collapse" aria-labelledby="headingGDStore" data-bs-parent="#gdAccordion">
                                                <div class="accordion-body">
                                                    Campos: description (requerido), date (opcional), symptoms (array IDs)
                            <pre><code>curl -X POST http://127.0.0.1:8000/api/general-diagnostics \
                            -H "Content-Type: application/json" \
                            -d '{"description":"Dolor abdominal","date":"2025-11-24","symptoms":[1,3]}'</code></pre>
                                                    <ul class="mb-0"><li><code>201 Created</code></li><li><code>400 Bad Request</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingGDShow">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#gdShow" type="button" aria-expanded="false" aria-controls="gdShow">
                                                    <span class="endpoint-method GET">GET</span><code>/api/general-diagnostics/{id}</code><span class="text-secondary ms-2">Mostrar</span>
                                                </button>
                                            </h2>
                                            <div id="gdShow" class="accordion-collapse collapse" aria-labelledby="headingGDShow" data-bs-parent="#gdAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET http://127.0.0.1:8000/api/general-diagnostics/12</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingGDUpdate">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#gdUpdate" type="button" aria-expanded="false" aria-controls="gdUpdate">
                                                    <span class="endpoint-method PUT">PUT</span><code>/api/general-diagnostics/{id}</code><span class="text-secondary ms-2">Actualizar</span>
                                                </button>
                                            </h2>
                                            <div id="gdUpdate" class="accordion-collapse collapse" aria-labelledby="headingGDUpdate" data-bs-parent="#gdAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X PUT http://127.0.0.1:8000/api/general-diagnostics/12 \
                            -H "Content-Type: application/json" \
                            -d '{"description":"Dolor abdominal leve","symptoms":[3,7]}'</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>400 Bad Request</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingGDDestroy">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#gdDestroy" type="button" aria-expanded="false" aria-controls="gdDestroy">
                                                    <span class="endpoint-method DELETE">DELETE</span><code>/api/general-diagnostics/{id}</code><span class="text-secondary ms-2">Eliminar</span>
                                                </button>
                                            </h2>
                                            <div id="gdDestroy" class="accordion-collapse collapse" aria-labelledby="headingGDDestroy" data-bs-parent="#gdAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X DELETE http://127.0.0.1:8000/api/general-diagnostics/12</code></pre>
                                                    <ul class="mb-0"><li><code>204 No Content</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Registros Clínicos -->
                                <div class="api-card p-4 mb-4 rounded">
                                    <h2 class="h4 mb-3"><i class="bi bi-journal-medical"></i> Registros Clínicos</h2>
                                    <div class="accordion" id="recordsAccordion">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingRecIndex">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#recIndex" type="button" aria-expanded="false" aria-controls="recIndex">
                                                    <span class="endpoint-method GET">GET</span><code>/api/records</code><span class="text-secondary ms-2">Listar</span>
                                                </button>
                                            </h2>
                                            <div id="recIndex" class="accordion-collapse collapse" aria-labelledby="headingRecIndex" data-bs-parent="#recordsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET http://127.0.0.1:8000/api/records</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingRecStore">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#recStore" type="button" aria-expanded="false" aria-controls="recStore">
                                                    <span class="endpoint-method POST">POST</span><code>/api/records</code><span class="text-secondary ms-2">Crear</span>
                                                </button>
                                            </h2>
                                            <div id="recStore" class="accordion-collapse collapse" aria-labelledby="headingRecStore" data-bs-parent="#recordsAccordion">
                                                <div class="accordion-body">
                                                    Requeridos: patient_id, fecha. Opcionales: diagnostic_id, antecedentes_salud, medicamentos, enfermedades[], alergias[], cirugias[], *_text
                            <pre><code>curl -X POST http://127.0.0.1:8000/api/records \
                            -H "Content-Type: application/json" \
                            -d '{"patient_id":4,"diagnostic_id":2,"antecedentes_salud":"Hipertensión","medicamentos":"Losartán","fecha":"2025-11-24","enfermedades":[1,3],"alergias_text":"Polen, Penicilina","cirugias":[2]}'</code></pre>
                                                    <ul class="mb-0"><li><code>201 Created</code></li><li><code>400 Bad Request</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingRecShow">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#recShow" type="button" aria-expanded="false" aria-controls="recShow">
                                                    <span class="endpoint-method GET">GET</span><code>/api/records/{id}</code><span class="text-secondary ms-2">Mostrar</span>
                                                </button>
                                            </h2>
                                            <div id="recShow" class="accordion-collapse collapse" aria-labelledby="headingRecShow" data-bs-parent="#recordsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X GET http://127.0.0.1:8000/api/records/10</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingRecUpdate">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#recUpdate" type="button" aria-expanded="false" aria-controls="recUpdate">
                                                    <span class="endpoint-method PUT">PUT</span><code>/api/records/{id}</code><span class="text-secondary ms-2">Actualizar</span>
                                                </button>
                                            </h2>
                                            <div id="recUpdate" class="accordion-collapse collapse" aria-labelledby="headingRecUpdate" data-bs-parent="#recordsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X PUT http://127.0.0.1:8000/api/records/10 \
                            -H "Content-Type: application/json" \
                            -d '{"patient_id":4,"diagnostic_id":2,"antecedentes_salud":"Controlado","medicamentos":"Losartán","fecha":"2025-11-25","enfermedades_text":"Diabetes"}'</code></pre>
                                                    <ul class="mb-0"><li><code>200 OK</code></li><li><code>400 Bad Request</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="headingRecDestroy">
                                                <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#recDestroy" type="button" aria-expanded="false" aria-controls="recDestroy">
                                                    <span class="endpoint-method DELETE">DELETE</span><code>/api/records/{id}</code><span class="text-secondary ms-2">Eliminar</span>
                                                </button>
                                            </h2>
                                            <div id="recDestroy" class="accordion-collapse collapse" aria-labelledby="headingRecDestroy" data-bs-parent="#recordsAccordion">
                                                <div class="accordion-body">
                            <pre><code>curl -X DELETE http://127.0.0.1:8000/api/records/10</code></pre>
                                                    <ul class="mb-0"><li><code>204 No Content</code></li><li><code>404 Not Found</code></li></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
                            </body>
                            </html>
                    </div>
                </div>
            </div>
